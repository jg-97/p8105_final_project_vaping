<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="data-cleaning">Data Cleaning</h1>
<p>Daniela Quigee (dq2147) 12/03/2019</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">prop_NA_original_data =<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">  df_return =<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(year, <span class="kw">everything</span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">drop_na</span>(year)</a>
<a class="sourceLine" id="cb1-4" title="4">  </a>
<a class="sourceLine" id="cb1-5" title="5">  variable_names =<span class="st"> </span><span class="kw">names</span>(df_return)</a>
<a class="sourceLine" id="cb1-6" title="6">  </a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="kw">length</span>(variable_names))</a>
<a class="sourceLine" id="cb1-8" title="8">  {</a>
<a class="sourceLine" id="cb1-9" title="9">    df_return[[i]] =<span class="st"> </span><span class="kw">is.na</span>(df_return[[i]])</a>
<a class="sourceLine" id="cb1-10" title="10">  }</a>
<a class="sourceLine" id="cb1-11" title="11">  </a>
<a class="sourceLine" id="cb1-12" title="12">  df_return =<span class="st"> </span>df_return <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="st">    </span><span class="kw">pivot_longer</span>(</a>
<a class="sourceLine" id="cb1-14" title="14">      <span class="op">-</span>year,</a>
<a class="sourceLine" id="cb1-15" title="15">      <span class="dt">names_to =</span> <span class="st">&quot;values&quot;</span>,</a>
<a class="sourceLine" id="cb1-16" title="16">      <span class="dt">values_to =</span> <span class="st">&quot;not_available&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="st">    </span><span class="kw">group_by</span>(year, values) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="st">    </span><span class="kw">summarize</span>(</a>
<a class="sourceLine" id="cb1-19" title="19">      <span class="dt">summeNA =</span> <span class="kw">sum</span>(not_available),</a>
<a class="sourceLine" id="cb1-20" title="20">      <span class="dt">summeNotNA =</span> <span class="kw">sum</span>(<span class="op">!</span>not_available)</a>
<a class="sourceLine" id="cb1-21" title="21">    ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-22" title="22"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb1-23" title="23">      <span class="dt">proportionNA =</span> summeNA <span class="op">/</span><span class="st"> </span>(summeNA <span class="op">+</span><span class="st"> </span>summeNotNA ),</a>
<a class="sourceLine" id="cb1-24" title="24">      <span class="dt">proportionNA =</span> <span class="kw">round</span>(proportionNA, <span class="dt">digits =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb1-25" title="25">    ) </a>
<a class="sourceLine" id="cb1-26" title="26">  </a>
<a class="sourceLine" id="cb1-27" title="27">  df_return</a>
<a class="sourceLine" id="cb1-28" title="28">}</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">df_Bronx =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;./raw_data/Bronx.xlsx&quot;</span>, <span class="dt">col_types =</span> <span class="st">&quot;text&quot;</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">df_Queens =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;./raw_data/Queens.xlsx&quot;</span>, <span class="dt">col_types =</span> <span class="st">&quot;text&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">df_Manhattan =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;./raw_data/Manhattan.xlsx&quot;</span>, <span class="dt">col_types =</span> <span class="st">&quot;text&quot;</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">df_StatenIsland =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;./raw_data/Staten_Island.xlsx&quot;</span>, <span class="dt">col_types =</span> <span class="st">&quot;text&quot;</span>)</a>
<a class="sourceLine" id="cb2-5" title="5">df_Brooklyn =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;./raw_data/Brooklyn.xlsx&quot;</span>, <span class="dt">col_types =</span> <span class="st">&quot;text&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">data_cleaning =<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb3-2" title="2">df =<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">    </span><span class="co"># Removing duplicate rows</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">    </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">    </span><span class="co"># Deleting unnecessary variables</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>sitecode, <span class="op">-</span>sitetype, <span class="op">-</span>sitetypenum,</a>
<a class="sourceLine" id="cb3-7" title="7">           <span class="op">-</span>survyear, <span class="op">-</span>weight, <span class="op">-</span>stratum, <span class="op">-</span>PSU,</a>
<a class="sourceLine" id="cb3-8" title="8">           <span class="op">-</span>record, <span class="op">-</span>qnobese, <span class="op">-</span>qnowt, <span class="op">-</span>sexid2, <span class="op">-</span>sexpart2,</a>
<a class="sourceLine" id="cb3-9" title="9">           <span class="op">-</span>qnwater, <span class="op">-</span>qnwater1, <span class="op">-</span>qnwater2, <span class="op">-</span>qnwater3,</a>
<a class="sourceLine" id="cb3-10" title="10">           <span class="op">-</span>qngenderexp, <span class="op">-</span>qntypealcohol, <span class="op">-</span>qnpropertydamage,</a>
<a class="sourceLine" id="cb3-11" title="11">           <span class="op">-</span>qndlype, <span class="op">-</span>qnpa7day, <span class="op">-</span>qnpa0day, <span class="op">-</span>qnbk7day, <span class="op">-</span>qnmilk3,</a>
<a class="sourceLine" id="cb3-12" title="12">           <span class="op">-</span>qnmilk2, <span class="op">-</span>qnmilk1, <span class="op">-</span>qnsoda3, <span class="op">-</span>qnsoda2, <span class="op">-</span>qnsoda1, </a>
<a class="sourceLine" id="cb3-13" title="13">           <span class="op">-</span>qnveg3, <span class="op">-</span>qnveg2, <span class="op">-</span>qnveg1, <span class="op">-</span>qnveg0, <span class="op">-</span>qnfr3,</a>
<a class="sourceLine" id="cb3-14" title="14">           <span class="op">-</span>qnfr2, <span class="op">-</span>qnfr1, <span class="op">-</span>qnfr0, <span class="op">-</span>qnowt, <span class="op">-</span>qnobese, <span class="op">-</span>qnbcnone,</a>
<a class="sourceLine" id="cb3-15" title="15">           <span class="op">-</span>qndualbc, <span class="op">-</span>qnothhpl, <span class="op">-</span>qnshparg, <span class="op">-</span>qniudimp, <span class="op">-</span>qntb2, </a>
<a class="sourceLine" id="cb3-16" title="16">           <span class="op">-</span>qntb3, <span class="op">-</span>qntb4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="st">     </span><span class="co"># Deleting unnecessary variables Part II</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="st">     </span><span class="kw">select</span>(<span class="op">-</span>qndaycgr, <span class="op">-</span>qnfrcgr, <span class="op">-</span>qndayskl, <span class="op">-</span>qnfrskl, <span class="op">-</span>qndayevp, <span class="op">-</span>qnfrevp, <span class="op">-</span>qndaycig, </a>
<a class="sourceLine" id="cb3-19" title="19">            <span class="op">-</span>qnfrcig, <span class="op">-</span>qnnodnt, <span class="op">-</span>qnbikehelmet, <span class="op">-</span>qncigschool, <span class="op">-</span>qnchewtobschool, <span class="op">-</span>qnalcoholschool,</a>
<a class="sourceLine" id="cb3-20" title="20">            <span class="op">-</span>qnmarijuanaschool, <span class="op">-</span>qncurrentcocaine, <span class="op">-</span>qntaughtHIV, <span class="op">-</span>qnmusclestrength, <span class="op">-</span>qnsunscreenuse,</a>
<a class="sourceLine" id="cb3-21" title="21">            <span class="op">-</span>qnindoortanning, <span class="op">-</span>qntransgender, <span class="op">-</span>qn89, <span class="op">-</span>qn88, <span class="op">-</span>qn87, <span class="op">-</span>qn86, <span class="op">-</span>qn85, <span class="op">-</span>qn83,</a>
<a class="sourceLine" id="cb3-22" title="22">            <span class="op">-</span>qn82, <span class="op">-</span>qn81, <span class="op">-</span>qn80, <span class="op">-</span>qn79, <span class="op">-</span>qn78, <span class="op">-</span>qn77, <span class="op">-</span>qn76, <span class="op">-</span>qn75, <span class="op">-</span>qn74,<span class="op">-</span>qn73, <span class="op">-</span>qn72, <span class="op">-</span>qn71,</a>
<a class="sourceLine" id="cb3-23" title="23">            <span class="op">-</span>qn70, <span class="op">-</span>qn69, <span class="op">-</span>qn68, <span class="op">-</span>race4, <span class="op">-</span>stheight, <span class="op">-</span>stweight, <span class="op">-</span>bmi, <span class="op">-</span>bmipct) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="st">     </span><span class="co"># No data</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="st">     </span><span class="kw">select</span>(</a>
<a class="sourceLine" id="cb3-26" title="26">       <span class="op">-</span>qn20, <span class="op">-</span>qn31, <span class="op">-</span>qn34, <span class="op">-</span>qn36, <span class="op">-</span>qn39, <span class="op">-</span>qn56, <span class="op">-</span>qn84,</a>
<a class="sourceLine" id="cb3-27" title="27">       <span class="op">-</span>qnspeakenglish, <span class="op">-</span>qnwheresleep, <span class="op">-</span>qncurrentasthma, </a>
<a class="sourceLine" id="cb3-28" title="28">       <span class="op">-</span>qnconcentrating, <span class="op">-</span>qnsunburn, <span class="op">-</span>qnwenthungry, </a>
<a class="sourceLine" id="cb3-29" title="29">       <span class="op">-</span>qnfoodallergy, <span class="op">-</span>qnfastfood, <span class="op">-</span>qnsugardrink, </a>
<a class="sourceLine" id="cb3-30" title="30">       <span class="op">-</span>qnenergydrink, <span class="op">-</span>qnspdrk1, <span class="op">-</span>qnspdrk2, <span class="op">-</span>qnspdrk3, </a>
<a class="sourceLine" id="cb3-31" title="31">       <span class="op">-</span>qnsportsdrink, <span class="op">-</span>qncoffeetea, <span class="op">-</span>qndietpop, <span class="op">-</span>qntaughtbc,</a>
<a class="sourceLine" id="cb3-32" title="32">       <span class="op">-</span>qntaughtcondom, <span class="op">-</span>qntaughtstd, <span class="op">-</span>qntaughtsexed, </a>
<a class="sourceLine" id="cb3-33" title="33">       <span class="op">-</span>qnprescription30d, <span class="op">-</span>qnhallucdrug, <span class="op">-</span>qncurrentmeth, </a>
<a class="sourceLine" id="cb3-34" title="34">       <span class="op">-</span>qncurrentheroin, <span class="op">-</span>qnhowmarijuana, <span class="op">-</span>qnchokeself, </a>
<a class="sourceLine" id="cb3-35" title="35">       <span class="op">-</span>qnbullygay, <span class="op">-</span>qnbullygender, <span class="op">-</span>qnbullyweight, </a>
<a class="sourceLine" id="cb3-36" title="36">       <span class="op">-</span>qncelldriving, <span class="op">-</span>qndrivemarijuana) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="st">    </span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb3-38" title="38">      <span class="dt">borough =</span> sitename) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-40" title="40">      <span class="dt">borough =</span> <span class="kw">recode</span>(borough,</a>
<a class="sourceLine" id="cb3-41" title="41">                       <span class="st">&quot;Borough of Bronx (NYG)&quot;</span> =<span class="st"> &quot;Bronx&quot;</span>,</a>
<a class="sourceLine" id="cb3-42" title="42">                       <span class="st">&quot;Borough of Queens (NYJ)&quot;</span> =<span class="st"> &quot;Queens&quot;</span>,</a>
<a class="sourceLine" id="cb3-43" title="43">                       <span class="st">&quot;Borough of Manhattan (NYI)&quot;</span> =<span class="st"> &quot;Manhattan&quot;</span>,</a>
<a class="sourceLine" id="cb3-44" title="44">                       <span class="st">&quot;Borough of Staten Island (NYK)&quot;</span> =<span class="st"> &quot;Staten Island&quot;</span>,</a>
<a class="sourceLine" id="cb3-45" title="45">                       <span class="st">&quot;Borough of Brooklyn (NYH)&quot;</span> =<span class="st"> &quot;Brooklyn&quot;</span>),</a>
<a class="sourceLine" id="cb3-46" title="46">      <span class="dt">borough =</span> <span class="kw">as.factor</span>(borough)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-47" title="47"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-48" title="48">      <span class="dt">year =</span> <span class="kw">as.numeric</span>(year)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-49" title="49"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-50" title="50">      <span class="dt">age =</span> <span class="kw">recode</span>(age,</a>
<a class="sourceLine" id="cb3-51" title="51">                   <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;12 years old or younger&quot;</span>, </a>
<a class="sourceLine" id="cb3-52" title="52">                   <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;13 years old&quot;</span>,</a>
<a class="sourceLine" id="cb3-53" title="53">                   <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;14 years old&quot;</span>,</a>
<a class="sourceLine" id="cb3-54" title="54">                   <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;15 years old&quot;</span>,</a>
<a class="sourceLine" id="cb3-55" title="55">                   <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;16 years old&quot;</span>,</a>
<a class="sourceLine" id="cb3-56" title="56">                   <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;17 years old&quot;</span>,</a>
<a class="sourceLine" id="cb3-57" title="57">                   <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;18 years old or older&quot;</span>),</a>
<a class="sourceLine" id="cb3-58" title="58">      <span class="dt">age =</span> <span class="kw">as.factor</span>(age)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-59" title="59"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-60" title="60">      <span class="dt">sex =</span> <span class="kw">recode</span>(sex,</a>
<a class="sourceLine" id="cb3-61" title="61">                   <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;female&quot;</span>, </a>
<a class="sourceLine" id="cb3-62" title="62">                   <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;male&quot;</span>),</a>
<a class="sourceLine" id="cb3-63" title="63">      <span class="dt">sex =</span> <span class="kw">as.factor</span>(sex)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-64" title="64"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-65" title="65">      <span class="dt">grade =</span> <span class="kw">recode</span>(grade,</a>
<a class="sourceLine" id="cb3-66" title="66">                 <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;9th grade&quot;</span>, </a>
<a class="sourceLine" id="cb3-67" title="67">                 <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;10th grade&quot;</span>, </a>
<a class="sourceLine" id="cb3-68" title="68">                 <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;11th grade&quot;</span>, </a>
<a class="sourceLine" id="cb3-69" title="69">                 <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;12th grade&quot;</span>, </a>
<a class="sourceLine" id="cb3-70" title="70">                 <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;ungraded or other grade&quot;</span>),</a>
<a class="sourceLine" id="cb3-71" title="71">      <span class="dt">grade =</span> <span class="kw">as.factor</span>(grade)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-72" title="72"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-73" title="73">      <span class="dt">race7 =</span> <span class="kw">recode</span>(race7,</a>
<a class="sourceLine" id="cb3-74" title="74">                     <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;American Indian/Alaska Native&quot;</span>, </a>
<a class="sourceLine" id="cb3-75" title="75">                     <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;Asian&quot;</span>, </a>
<a class="sourceLine" id="cb3-76" title="76">                     <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;Black or African American&quot;</span>, </a>
<a class="sourceLine" id="cb3-77" title="77">                     <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;Hispanic/Latino&quot;</span>, </a>
<a class="sourceLine" id="cb3-78" title="78">                     <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;Native Hawaiian/Other Pacific Islander&quot;</span>, </a>
<a class="sourceLine" id="cb3-79" title="79">                     <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;White&quot;</span>,</a>
<a class="sourceLine" id="cb3-80" title="80">                     <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;Multiple Races (Non-Hispanic)&quot;</span>),</a>
<a class="sourceLine" id="cb3-81" title="81">      <span class="dt">race7 =</span> <span class="kw">as.factor</span>(race7)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-82" title="82"><span class="st">    </span><span class="co"># Sexual identity</span></a>
<a class="sourceLine" id="cb3-83" title="83"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-84" title="84">      <span class="dt">q67 =</span> <span class="kw">recode</span>(q67,</a>
<a class="sourceLine" id="cb3-85" title="85">                   <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;heterosexual&quot;</span>, </a>
<a class="sourceLine" id="cb3-86" title="86">                   <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;gay/lesbian&quot;</span>, </a>
<a class="sourceLine" id="cb3-87" title="87">                   <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;bisexual&quot;</span>, </a>
<a class="sourceLine" id="cb3-88" title="88">                   <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;not sure&quot;</span>),</a>
<a class="sourceLine" id="cb3-89" title="89">      <span class="dt">q67 =</span> <span class="kw">as.factor</span>(q67)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-90" title="90"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sexual_identity =</span> q67) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-91" title="91"><span class="st">    </span><span class="co"># Sexual identity 2</span></a>
<a class="sourceLine" id="cb3-92" title="92"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-93" title="93">      <span class="dt">sexid =</span> <span class="kw">recode</span>(sexid, </a>
<a class="sourceLine" id="cb3-94" title="94">                     <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;heterosexual&quot;</span>, </a>
<a class="sourceLine" id="cb3-95" title="95">                     <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;gay/lesbian&quot;</span>, </a>
<a class="sourceLine" id="cb3-96" title="96">                     <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;bisexual&quot;</span>, </a>
<a class="sourceLine" id="cb3-97" title="97">                     <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;not sure&quot;</span>),</a>
<a class="sourceLine" id="cb3-98" title="98">      <span class="dt">sexid =</span> <span class="kw">as.factor</span>(sexid)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-99" title="99"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sexual_identity_2 =</span> sexid) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-100" title="100"><span class="st">    </span><span class="co"># Sexual Contact</span></a>
<a class="sourceLine" id="cb3-101" title="101"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-102" title="102">      <span class="dt">q66 =</span> <span class="kw">recode</span>(q66,</a>
<a class="sourceLine" id="cb3-103" title="103">                   <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;no sexual contact&quot;</span>, </a>
<a class="sourceLine" id="cb3-104" title="104">                   <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;females&quot;</span>, </a>
<a class="sourceLine" id="cb3-105" title="105">                   <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;males&quot;</span>, </a>
<a class="sourceLine" id="cb3-106" title="106">                   <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;females and males&quot;</span>),</a>
<a class="sourceLine" id="cb3-107" title="107">      <span class="dt">q66 =</span> <span class="kw">as.factor</span>(q66)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-108" title="108"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sexual_contact =</span> q66) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-109" title="109"><span class="st">    </span><span class="co"># Sexual Contact 2</span></a>
<a class="sourceLine" id="cb3-110" title="110"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-111" title="111">      <span class="dt">sexpart =</span> <span class="kw">recode</span>(sexpart,</a>
<a class="sourceLine" id="cb3-112" title="112">                       <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;never had sex&quot;</span>, </a>
<a class="sourceLine" id="cb3-113" title="113">                       <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;opposite sex only&quot;</span>, </a>
<a class="sourceLine" id="cb3-114" title="114">                       <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;same sex only&quot;</span>, </a>
<a class="sourceLine" id="cb3-115" title="115">                       <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;both sexes&quot;</span>),</a>
<a class="sourceLine" id="cb3-116" title="116">      <span class="dt">sexpart =</span> <span class="kw">as.factor</span>(sexpart)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-117" title="117"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sexual_contact_2 =</span> sexpart) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-118" title="118"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-119" title="119"><span class="st">    </span><span class="co"># How often do you wear a seat belt when riding in a car driven by someone else?</span></a>
<a class="sourceLine" id="cb3-120" title="120"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-121" title="121">      <span class="dt">qn8 =</span> <span class="kw">recode</span>(qn8,</a>
<a class="sourceLine" id="cb3-122" title="122">                   <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;never/rarely&quot;</span>,</a>
<a class="sourceLine" id="cb3-123" title="123">                   <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;sometimes or more&quot;</span>),</a>
<a class="sourceLine" id="cb3-124" title="124">      <span class="dt">qn8 =</span> <span class="kw">as.factor</span>(qn8)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-125" title="125"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">seatbelt_use =</span> qn8) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-126" title="126"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-127" title="127"><span class="st">    </span><span class="co"># During the past 30 days, how many times did you ride in a car or other vehicle driven by someone who had been drinking alcohol?</span></a>
<a class="sourceLine" id="cb3-128" title="128"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-129" title="129">      <span class="dt">qn9 =</span> <span class="kw">recode</span>(qn9,</a>
<a class="sourceLine" id="cb3-130" title="130">                   <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-131" title="131">                   <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-132" title="132">      <span class="dt">qn9 =</span> <span class="kw">as.factor</span>(qn9)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-133" title="133"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">riding_with_drinking_driver =</span> qn9) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-134" title="134"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-135" title="135"><span class="st">    </span><span class="co"># During the past 30 days, how many times did you drive a car or other vehicle when you had been drinking alcohol?</span></a>
<a class="sourceLine" id="cb3-136" title="136"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-137" title="137">      <span class="dt">qn10 =</span> <span class="kw">recode</span>(qn10,</a>
<a class="sourceLine" id="cb3-138" title="138">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-139" title="139">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No/did not drive&quot;</span>),</a>
<a class="sourceLine" id="cb3-140" title="140">      <span class="dt">qn10 =</span> <span class="kw">as.factor</span>(qn10),</a>
<a class="sourceLine" id="cb3-141" title="141">      <span class="dt">qn10 =</span> <span class="kw">fct_relevel</span>(qn10, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No/did not drive&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-142" title="142"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">drinking_and_driving =</span> qn10) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-143" title="143"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-144" title="144"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you text or e-mail while driving a car or other vehicle?</span></a>
<a class="sourceLine" id="cb3-145" title="145"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-146" title="146">      <span class="dt">qn11 =</span> <span class="kw">recode</span>(qn11,</a>
<a class="sourceLine" id="cb3-147" title="147">                 <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-148" title="148">                 <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No/did not drive&quot;</span>),</a>
<a class="sourceLine" id="cb3-149" title="149">      <span class="dt">qn11 =</span> <span class="kw">as.factor</span>(qn11),</a>
<a class="sourceLine" id="cb3-150" title="150">      <span class="dt">qn11 =</span> <span class="kw">fct_relevel</span>(qn11, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No/did not drive&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-151" title="151"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">texting_and_driving =</span> qn11) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-152" title="152"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-153" title="153"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you carry a weapon such as a gun, knife, or club?</span></a>
<a class="sourceLine" id="cb3-154" title="154"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-155" title="155">      <span class="dt">qn12 =</span> <span class="kw">recode</span>(qn12,</a>
<a class="sourceLine" id="cb3-156" title="156">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-157" title="157">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-158" title="158">      <span class="dt">qn12 =</span> <span class="kw">as.factor</span>(qn12),</a>
<a class="sourceLine" id="cb3-159" title="159">      <span class="dt">qn12 =</span> <span class="kw">fct_relevel</span>(qn12, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-160" title="160"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">carring_weapon =</span> qn12) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-161" title="161"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-162" title="162"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you carry a weapon such as a gun, knife, or club on school property?</span></a>
<a class="sourceLine" id="cb3-163" title="163"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-164" title="164">      <span class="dt">qn13 =</span> <span class="kw">recode</span>(qn13,</a>
<a class="sourceLine" id="cb3-165" title="165">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-166" title="166">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-167" title="167">      <span class="dt">qn13 =</span> <span class="kw">as.factor</span>(qn13)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-168" title="168"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">carring_weapon_school =</span> qn13) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-169" title="169"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-170" title="170"><span class="st">    </span><span class="co"># During the past 12 months, on how many days did you carry a gun? (Do not count the days when you carried a gun only for hunting or for a sport, such as target shooting.)</span></a>
<a class="sourceLine" id="cb3-171" title="171"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-172" title="172">      <span class="dt">qn14 =</span> <span class="kw">recode</span>(qn14,</a>
<a class="sourceLine" id="cb3-173" title="173">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-174" title="174">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-175" title="175">      <span class="dt">qn14 =</span> <span class="kw">as.factor</span>(qn14)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-176" title="176"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">gun_carrying_past_12_month =</span> qn14) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-177" title="177"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-178" title="178"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you not go to school because you felt you would be unsafe at school or on your way to or from school?</span></a>
<a class="sourceLine" id="cb3-179" title="179"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-180" title="180">      <span class="dt">qn15 =</span> <span class="kw">recode</span>(qn15,</a>
<a class="sourceLine" id="cb3-181" title="181">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-182" title="182">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-183" title="183">      <span class="dt">qn15 =</span> <span class="kw">as.factor</span>(qn15),</a>
<a class="sourceLine" id="cb3-184" title="184">      <span class="dt">qn15 =</span> <span class="kw">fct_relevel</span>(qn15, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-185" title="185"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">safety_concerns_at_school =</span> qn15) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-186" title="186"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-187" title="187"><span class="st">    </span><span class="co"># During the past 12 months, how many times has someone threatened or injured you with a weapon such as a gun, knife, or club on school property?</span></a>
<a class="sourceLine" id="cb3-188" title="188"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-189" title="189">      <span class="dt">qn16 =</span> <span class="kw">recode</span>(qn16,</a>
<a class="sourceLine" id="cb3-190" title="190">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-191" title="191">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-192" title="192">      <span class="dt">qn16 =</span> <span class="kw">as.factor</span>(qn16),</a>
<a class="sourceLine" id="cb3-193" title="193">      <span class="dt">qn16 =</span> <span class="kw">fct_relevel</span>(qn16, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-194" title="194"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">threatened_at_school =</span> qn16) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-195" title="195"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-196" title="196"><span class="st">    </span><span class="co"># During the past 12 months, how many times were you in a physical fight?</span></a>
<a class="sourceLine" id="cb3-197" title="197"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-198" title="198">      <span class="dt">qn17 =</span> <span class="kw">recode</span>(qn17,</a>
<a class="sourceLine" id="cb3-199" title="199">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-200" title="200">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-201" title="201">      <span class="dt">qn17 =</span> <span class="kw">as.factor</span>(qn17),</a>
<a class="sourceLine" id="cb3-202" title="202">      <span class="dt">qn17 =</span> <span class="kw">fct_relevel</span>(qn17, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-203" title="203"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">physical_fighting =</span> qn17) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-204" title="204"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-205" title="205"><span class="st">    </span><span class="co"># During the past 12 months, how many times were you in a physical fight on school property?</span></a>
<a class="sourceLine" id="cb3-206" title="206"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-207" title="207">      <span class="dt">qn18 =</span> <span class="kw">recode</span>(qn18,</a>
<a class="sourceLine" id="cb3-208" title="208">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-209" title="209">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-210" title="210">      <span class="dt">qn18 =</span> <span class="kw">as.factor</span>(qn18)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-211" title="211"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">physical_fighting_at_school =</span> qn18) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-212" title="212"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-213" title="213"><span class="st">    </span><span class="co"># Have you ever been physically forced to have sexual intercourse when you did not want to?</span></a>
<a class="sourceLine" id="cb3-214" title="214"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-215" title="215">      <span class="dt">qn19 =</span> <span class="kw">recode</span>(qn19,</a>
<a class="sourceLine" id="cb3-216" title="216">                 <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-217" title="217">                 <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-218" title="218">      <span class="dt">qn19 =</span> <span class="kw">as.factor</span>(qn19)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-219" title="219"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">forced_sexual_intercourse =</span> qn19) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-220" title="220"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-221" title="221"><span class="st">    </span><span class="co"># During the past 12 months, how many times did someone you were dating or going out with force you to do sexual things that you did not want to do? (Count such things as kissing, touching, or being physically forced to have sexual intercourse.)</span></a>
<a class="sourceLine" id="cb3-222" title="222"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-223" title="223">      <span class="dt">qn21 =</span> <span class="kw">recode</span>(qn21,</a>
<a class="sourceLine" id="cb3-224" title="224">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;1 or more times&quot;</span>,</a>
<a class="sourceLine" id="cb3-225" title="225">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;did not date/0 times&quot;</span>),</a>
<a class="sourceLine" id="cb3-226" title="226">      <span class="dt">qn21 =</span> <span class="kw">as.factor</span>(qn21)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-227" title="227"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sexual_dating_violence =</span> qn21) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-228" title="228"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-229" title="229"><span class="st">    </span><span class="co"># During the past 12 months, how many times did someone you were dating or going out with physically hurt you on purpose? (Count such things as being hit, slammed into something, or injured with an object or weapon.)</span></a>
<a class="sourceLine" id="cb3-230" title="230"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-231" title="231">      <span class="dt">qn22 =</span> <span class="kw">recode</span>(qn22,</a>
<a class="sourceLine" id="cb3-232" title="232">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;1 or more times&quot;</span>,</a>
<a class="sourceLine" id="cb3-233" title="233">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;did not date/0 times&quot;</span>),</a>
<a class="sourceLine" id="cb3-234" title="234">      <span class="dt">qn22 =</span> <span class="kw">as.factor</span>(qn22)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-235" title="235"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">physical_dating_violence =</span> qn22) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-236" title="236"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-237" title="237"><span class="st">    </span><span class="co"># During the past 12 months, have you ever been bullied on school property?</span></a>
<a class="sourceLine" id="cb3-238" title="238"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-239" title="239">      <span class="dt">qn23 =</span> <span class="kw">recode</span>(qn23,</a>
<a class="sourceLine" id="cb3-240" title="240">                 <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-241" title="241">                 <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-242" title="242">      <span class="dt">qn23 =</span> <span class="kw">as.factor</span>(qn23),</a>
<a class="sourceLine" id="cb3-243" title="243">      <span class="dt">qn23 =</span> <span class="kw">fct_relevel</span>(qn23, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-244" title="244"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">bullying_at_school =</span> qn23) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-245" title="245"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-246" title="246"><span class="st">    </span><span class="co"># During the past 12 months, have you ever been electronically bullied? (Count being bullied through texting, Instagram, Facebook, or other social media.)</span></a>
<a class="sourceLine" id="cb3-247" title="247"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-248" title="248">      <span class="dt">qn24 =</span> <span class="kw">recode</span>(qn24,</a>
<a class="sourceLine" id="cb3-249" title="249">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-250" title="250">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-251" title="251">      <span class="dt">qn24 =</span> <span class="kw">as.factor</span>(qn24),</a>
<a class="sourceLine" id="cb3-252" title="252">      <span class="dt">qn24 =</span> <span class="kw">fct_relevel</span>(qn24, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-253" title="253"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">bullying_electronically =</span> qn24) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-254" title="254"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-255" title="255"><span class="st">    </span><span class="co"># During the past 12 months, did you ever feel so sad or hopeless almost every day for two weeks or more in a row that you stopped doing some usual activities?</span></a>
<a class="sourceLine" id="cb3-256" title="256"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-257" title="257">      <span class="dt">qn25 =</span> <span class="kw">recode</span>(qn25,</a>
<a class="sourceLine" id="cb3-258" title="258">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-259" title="259">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-260" title="260">      <span class="dt">qn25 =</span> <span class="kw">as.factor</span>(qn25),</a>
<a class="sourceLine" id="cb3-261" title="261">      <span class="dt">qn25 =</span> <span class="kw">fct_relevel</span>(qn25, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-262" title="262"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sad_hopeless =</span> qn25) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-263" title="263"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-264" title="264"><span class="st">    </span><span class="co"># During the past 12 months, did you ever seriously consider attempting suicide?</span></a>
<a class="sourceLine" id="cb3-265" title="265"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-266" title="266">      <span class="dt">qn26 =</span> <span class="kw">recode</span>(qn26, </a>
<a class="sourceLine" id="cb3-267" title="267">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-268" title="268">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-269" title="269">      <span class="dt">qn26 =</span> <span class="kw">as.factor</span>(qn26),</a>
<a class="sourceLine" id="cb3-270" title="270">      <span class="dt">qn26 =</span> <span class="kw">fct_relevel</span>(qn26, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-271" title="271"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">considered_suicide =</span> qn26) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-272" title="272"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-273" title="273"><span class="st">    </span><span class="co"># During the past 12 months, did you make a plan about how you would attempt suicide?</span></a>
<a class="sourceLine" id="cb3-274" title="274"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-275" title="275">      <span class="dt">qn27 =</span> <span class="kw">recode</span>(qn27,</a>
<a class="sourceLine" id="cb3-276" title="276">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-277" title="277">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-278" title="278">      <span class="dt">qn27 =</span> <span class="kw">as.factor</span>(qn27),</a>
<a class="sourceLine" id="cb3-279" title="279">      <span class="dt">qn27 =</span> <span class="kw">fct_relevel</span>(qn27, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-280" title="280"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">made_suicide_plan =</span> qn27) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-281" title="281"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-282" title="282"><span class="st">    </span><span class="co"># During the past 12 months, how many times did you actually attempt suicide?</span></a>
<a class="sourceLine" id="cb3-283" title="283"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-284" title="284">      <span class="dt">qn28 =</span> <span class="kw">recode</span>(qn28,</a>
<a class="sourceLine" id="cb3-285" title="285">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-286" title="286">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-287" title="287">      <span class="dt">qn28 =</span> <span class="kw">as.factor</span>(qn28),</a>
<a class="sourceLine" id="cb3-288" title="288">      <span class="dt">qn28 =</span> <span class="kw">fct_relevel</span>(qn28, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-289" title="289"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">attempted_suicide =</span> qn28) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-290" title="290"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-291" title="291"><span class="st">    </span><span class="co"># If you attempted suicide during the past 12 months, did any attempt result in an injury, poisoning, or overdose that had to be treated by a doctor or nurse?</span></a>
<a class="sourceLine" id="cb3-292" title="292"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-293" title="293">      <span class="dt">qn29 =</span> <span class="kw">recode</span>(qn29,</a>
<a class="sourceLine" id="cb3-294" title="294">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-295" title="295">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No/did not attempt suicide&quot;</span>),</a>
<a class="sourceLine" id="cb3-296" title="296">      <span class="dt">qn29 =</span> <span class="kw">as.factor</span>(qn29),</a>
<a class="sourceLine" id="cb3-297" title="297">      <span class="dt">qn29 =</span> <span class="kw">fct_relevel</span>(qn29, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No/did not attempt suicide&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-298" title="298"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">injurious_suicide_attempt =</span> qn29) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-299" title="299"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-300" title="300"><span class="st">    </span><span class="co"># Have you ever tried cigarette smoking, even one or two puffs?</span></a>
<a class="sourceLine" id="cb3-301" title="301"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-302" title="302">      <span class="dt">qn30 =</span> <span class="kw">recode</span>(qn30,</a>
<a class="sourceLine" id="cb3-303" title="303">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-304" title="304">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-305" title="305">      <span class="dt">qn30 =</span> <span class="kw">as.factor</span>(qn30)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-306" title="306"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_cigarette_use =</span> qn30) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-307" title="307"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-308" title="308"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you smoke cigarettes?</span></a>
<a class="sourceLine" id="cb3-309" title="309"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-310" title="310">      <span class="dt">qn32 =</span> <span class="kw">recode</span>(qn32,</a>
<a class="sourceLine" id="cb3-311" title="311">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-312" title="312">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-313" title="313">      <span class="dt">qn32 =</span> <span class="kw">as.factor</span>(qn32),</a>
<a class="sourceLine" id="cb3-314" title="314">      <span class="dt">qn32 =</span> <span class="kw">fct_relevel</span>(qn32, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-315" title="315"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_cigarette_use =</span> qn32) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-316" title="316"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-317" title="317"><span class="st">    </span><span class="co"># During the past 30 days, on the days you smoked, how many cigarettes did you smoke per day?</span></a>
<a class="sourceLine" id="cb3-318" title="318"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-319" title="319">      <span class="dt">qn33 =</span> <span class="kw">recode</span>(qn33,</a>
<a class="sourceLine" id="cb3-320" title="320">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;11 or more cigarettes per day&quot;</span>,</a>
<a class="sourceLine" id="cb3-321" title="321">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;no smoking/less than 11 cigarettes&quot;</span>),</a>
<a class="sourceLine" id="cb3-322" title="322">      <span class="dt">qn33 =</span> <span class="kw">as.factor</span>(qn33),</a>
<a class="sourceLine" id="cb3-323" title="323">      <span class="dt">qn33 =</span> qn33) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-324" title="324"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">smoked_greater_10 =</span> qn33) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-325" title="325"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-326" title="326"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you use an electronic vapor product?</span></a>
<a class="sourceLine" id="cb3-327" title="327"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-328" title="328">      <span class="dt">qn35 =</span> <span class="kw">recode</span>(qn35,</a>
<a class="sourceLine" id="cb3-329" title="329">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-330" title="330">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-331" title="331">      <span class="dt">qn35 =</span> <span class="kw">as.factor</span>(qn35),</a>
<a class="sourceLine" id="cb3-332" title="332">      <span class="dt">qn35 =</span> <span class="kw">fct_relevel</span>(qn35, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-333" title="333"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_vaping =</span> qn35) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-334" title="334"><span class="co">##################################################################################### </span></a>
<a class="sourceLine" id="cb3-335" title="335"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you use chewing tobacco, snuff, dip, snus, or dissolvable tobacco products, such as Redman, Levi Garrett, Beechnut, Skoal, Skoal Bandits, Copenhagen, Camel Snus, Marlboro Snus, General Snus, Ariva, Stonewall, or Camel Orbs? (Do not count any electronic vapor products.)</span></a>
<a class="sourceLine" id="cb3-336" title="336"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-337" title="337">      <span class="dt">qn37 =</span> <span class="kw">recode</span>(qn37,</a>
<a class="sourceLine" id="cb3-338" title="338">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-339" title="339">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-340" title="340">      <span class="dt">qn37 =</span> <span class="kw">as.factor</span>(qn37),</a>
<a class="sourceLine" id="cb3-341" title="341">      <span class="dt">qn37 =</span> <span class="kw">fct_relevel</span>(qn37, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-342" title="342"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_smokeless_tobacco_use =</span> qn37) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-343" title="343"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-344" title="344"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you smoke cigars, cigarillos, or little cigars?</span></a>
<a class="sourceLine" id="cb3-345" title="345"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-346" title="346">      <span class="dt">qn38 =</span> <span class="kw">recode</span>(qn38,</a>
<a class="sourceLine" id="cb3-347" title="347">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-348" title="348">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-349" title="349">      <span class="dt">qn38 =</span> <span class="kw">as.factor</span>(qn38),</a>
<a class="sourceLine" id="cb3-350" title="350">      <span class="dt">qn38 =</span> <span class="kw">fct_relevel</span>(qn38, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-351" title="351"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_cigar_use =</span> qn38) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-352" title="352"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-353" title="353"><span class="st">    </span><span class="co"># During your life, on how many days have you had at least one drink of alcohol?</span></a>
<a class="sourceLine" id="cb3-354" title="354"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-355" title="355">      <span class="dt">qn40 =</span> <span class="kw">recode</span>(qn40,</a>
<a class="sourceLine" id="cb3-356" title="356">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-357" title="357">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-358" title="358">      <span class="dt">qn40 =</span> <span class="kw">as.factor</span>(qn40)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-359" title="359"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_alcohol_use =</span> qn40) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-360" title="360"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-361" title="361"><span class="st">    </span><span class="co"># How old were you when you had your first drink of alcohol other than a few sips?</span></a>
<a class="sourceLine" id="cb3-362" title="362"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-363" title="363">      <span class="dt">qn41 =</span> <span class="kw">recode</span>(qn41,</a>
<a class="sourceLine" id="cb3-364" title="364">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;12 years or younger&quot;</span>,</a>
<a class="sourceLine" id="cb3-365" title="365">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;never had a drink/13 years or older&quot;</span>),</a>
<a class="sourceLine" id="cb3-366" title="366">      <span class="dt">qn41 =</span> <span class="kw">as.factor</span>(qn41)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-367" title="367"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">initiation_alcohol_use =</span> qn41) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-368" title="368"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-369" title="369"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you have at least one drink of alcohol?</span></a>
<a class="sourceLine" id="cb3-370" title="370"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-371" title="371">      <span class="dt">qn42 =</span> <span class="kw">recode</span>(qn42,</a>
<a class="sourceLine" id="cb3-372" title="372">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-373" title="373">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-374" title="374">      <span class="dt">qn42 =</span> <span class="kw">as.factor</span>(qn42),</a>
<a class="sourceLine" id="cb3-375" title="375">      <span class="dt">qn42 =</span> <span class="kw">fct_relevel</span>(qn42, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-376" title="376"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_alcohol_use =</span> qn42) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-377" title="377"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-378" title="378"><span class="st">    </span><span class="co"># During the past 30 days, how did you usually get the alcohol you drank?</span></a>
<a class="sourceLine" id="cb3-379" title="379"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-380" title="380">      <span class="dt">qn43 =</span> <span class="kw">recode</span>(qn43,</a>
<a class="sourceLine" id="cb3-381" title="381">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;someone gave it to me&quot;</span>,</a>
<a class="sourceLine" id="cb3-382" title="382">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;otherwise&quot;</span>),</a>
<a class="sourceLine" id="cb3-383" title="383">      <span class="dt">qn43 =</span> <span class="kw">as.factor</span>(qn43)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-384" title="384"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">source_alcohol =</span> qn43) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-385" title="385"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-386" title="386"><span class="st">    </span><span class="co"># During the past 30 days, on how many days did you have 4 or more drinks of alcohol in a row (if you are female) or 5 or more drinks of alcohol in a row (if you are male)?</span></a>
<a class="sourceLine" id="cb3-387" title="387"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-388" title="388">      <span class="dt">qn44 =</span> <span class="kw">recode</span>(qn44,</a>
<a class="sourceLine" id="cb3-389" title="389">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-390" title="390">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-391" title="391">      <span class="dt">qn44 =</span> <span class="kw">as.factor</span>(qn44)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-392" title="392"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">currret_binge_drinking =</span> qn44) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-393" title="393"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-394" title="394"><span class="st">    </span><span class="co"># During the past 30 days, what is the largest number of alcoholic drinks you had in a row?</span></a>
<a class="sourceLine" id="cb3-395" title="395"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-396" title="396">      <span class="dt">qn45 =</span> <span class="kw">recode</span>(qn45,</a>
<a class="sourceLine" id="cb3-397" title="397">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;10 or more drinks&quot;</span>,</a>
<a class="sourceLine" id="cb3-398" title="398">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;less than 10 drinks&quot;</span>),</a>
<a class="sourceLine" id="cb3-399" title="399">      <span class="dt">qn45 =</span> <span class="kw">as.factor</span>(qn45)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-400" title="400"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">largest_n_drinks =</span> qn45) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-401" title="401"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-402" title="402"><span class="st">    </span><span class="co"># During your life, how many times have you used marijuana?</span></a>
<a class="sourceLine" id="cb3-403" title="403"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-404" title="404">      <span class="dt">qn46 =</span> <span class="kw">recode</span>(qn46,</a>
<a class="sourceLine" id="cb3-405" title="405">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-406" title="406">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-407" title="407">      <span class="dt">qn46 =</span> <span class="kw">as.factor</span>(qn46)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-408" title="408"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_marijuana_use =</span> qn46) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-409" title="409"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-410" title="410"><span class="st">    </span><span class="co"># How old were you when you tried marijuana for the first time?</span></a>
<a class="sourceLine" id="cb3-411" title="411"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-412" title="412">      <span class="dt">qn47 =</span> <span class="kw">recode</span>(qn47,</a>
<a class="sourceLine" id="cb3-413" title="413">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;12 years or younger&quot;</span>,</a>
<a class="sourceLine" id="cb3-414" title="414">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;never tried/13 years or older&quot;</span>),</a>
<a class="sourceLine" id="cb3-415" title="415">      <span class="dt">qn47 =</span> <span class="kw">as.factor</span>(qn47)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-416" title="416"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">initiation_marijuana_use  =</span> qn47) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-417" title="417"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-418" title="418"><span class="st">    </span><span class="co"># During the past 30 days, how many times did you use marijuana?</span></a>
<a class="sourceLine" id="cb3-419" title="419"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-420" title="420">      <span class="dt">qn48 =</span> <span class="kw">recode</span>(qn48,</a>
<a class="sourceLine" id="cb3-421" title="421">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-422" title="422">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-423" title="423">      <span class="dt">qn48 =</span> <span class="kw">as.factor</span>(qn48),</a>
<a class="sourceLine" id="cb3-424" title="424">      <span class="dt">qn48 =</span> <span class="kw">fct_relevel</span>(qn48, <span class="kw">c</span>(<span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-425" title="425"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_marijuana_use  =</span> qn48) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-426" title="426"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-427" title="427"><span class="st">    </span><span class="co"># During your life, how many times have you used any form of cocaine, including powder, crack, or freebase</span></a>
<a class="sourceLine" id="cb3-428" title="428"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-429" title="429">      <span class="dt">qn49 =</span> <span class="kw">recode</span>(qn49,</a>
<a class="sourceLine" id="cb3-430" title="430">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-431" title="431">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-432" title="432">      <span class="dt">qn49 =</span> <span class="kw">as.factor</span>(qn49)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-433" title="433"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_cocaine_use  =</span> qn49) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-434" title="434"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-435" title="435"><span class="st">    </span><span class="co"># During your life, how many times have you sniffed glue, breathed the contents of aerosol spray cans, or inhaled any paints or sprays to get high?</span></a>
<a class="sourceLine" id="cb3-436" title="436"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-437" title="437">      <span class="dt">qn50 =</span> <span class="kw">recode</span>(qn50,</a>
<a class="sourceLine" id="cb3-438" title="438">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-439" title="439">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-440" title="440">      <span class="dt">qn50 =</span> <span class="kw">as.factor</span>(qn50)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-441" title="441"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_inhalant_use  =</span> qn50) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-442" title="442"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-443" title="443"><span class="st">    </span><span class="co"># During your life, how many times have you used heroin (also called smack, junk, or China White)?</span></a>
<a class="sourceLine" id="cb3-444" title="444"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-445" title="445">      <span class="dt">qn51 =</span> <span class="kw">recode</span>(qn51,</a>
<a class="sourceLine" id="cb3-446" title="446">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-447" title="447">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-448" title="448">      <span class="dt">qn51 =</span> <span class="kw">as.factor</span>(qn51)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-449" title="449"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_heroin_use  =</span> qn51) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-450" title="450"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-451" title="451"><span class="st">    </span><span class="co"># During your life, how many times have you used methamphetamines (also called speed, crystal, crank, or ice)? A. 0 times</span></a>
<a class="sourceLine" id="cb3-452" title="452"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-453" title="453">      <span class="dt">qn52 =</span> <span class="kw">recode</span>(qn52,</a>
<a class="sourceLine" id="cb3-454" title="454">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-455" title="455">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-456" title="456">      <span class="dt">qn52 =</span> <span class="kw">as.factor</span>(qn52)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-457" title="457"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_methamphetamine_use  =</span> qn52) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-458" title="458"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-459" title="459"><span class="st">    </span><span class="co"># During your life, how many times have you used ecstasy (also called MDMA)?</span></a>
<a class="sourceLine" id="cb3-460" title="460"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-461" title="461">      <span class="dt">qn53 =</span> <span class="kw">recode</span>(qn53,</a>
<a class="sourceLine" id="cb3-462" title="462">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-463" title="463">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-464" title="464">      <span class="dt">qn53 =</span> <span class="kw">as.factor</span>(qn53)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-465" title="465"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_ecstasy_use  =</span> qn53) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-466" title="466"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-467" title="467"><span class="st">    </span><span class="co"># During your life, how many times have you used synthetic marijuana (also called K2, Spice, fake weed, King Kong, Yucatan Fire, Skunk, or Moon Rocks)?</span></a>
<a class="sourceLine" id="cb3-468" title="468"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-469" title="469">      <span class="dt">qn54 =</span> <span class="kw">recode</span>(qn54,</a>
<a class="sourceLine" id="cb3-470" title="470">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-471" title="471">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-472" title="472">      <span class="dt">qn54 =</span> <span class="kw">as.factor</span>(qn54)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-473" title="473"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_synthetic_marijuana_use  =</span> qn54) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-474" title="474"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-475" title="475"><span class="st">    </span><span class="co"># During your life, how many times have you taken steroid pills or shots without a doctor&#39;s prescription?</span></a>
<a class="sourceLine" id="cb3-476" title="476"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-477" title="477">      <span class="dt">qn55 =</span> <span class="kw">recode</span>(qn55,</a>
<a class="sourceLine" id="cb3-478" title="478">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-479" title="479">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-480" title="480">      <span class="dt">qn55 =</span> <span class="kw">as.factor</span>(qn55)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-481" title="481"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_steroid_use  =</span> qn55) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-482" title="482"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-483" title="483"><span class="st">    </span><span class="co"># During your life, how many times have you used a needle to inject any illegal drug into your body?</span></a>
<a class="sourceLine" id="cb3-484" title="484"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-485" title="485">      <span class="dt">qn57 =</span> <span class="kw">recode</span>(qn57,</a>
<a class="sourceLine" id="cb3-486" title="486">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-487" title="487">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-488" title="488">      <span class="dt">qn57 =</span> <span class="kw">as.factor</span>(qn57)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-489" title="489"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">illegal_injected_drug_use  =</span> qn57) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-490" title="490"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-491" title="491"><span class="st">    </span><span class="co"># During the past 12 months, has anyone offered, sold, or given you an illegal drug on school property?</span></a>
<a class="sourceLine" id="cb3-492" title="492"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-493" title="493">      <span class="dt">qn58 =</span> <span class="kw">recode</span>(qn58,</a>
<a class="sourceLine" id="cb3-494" title="494">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-495" title="495">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-496" title="496">      <span class="dt">qn58 =</span> <span class="kw">as.factor</span>(qn58)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-497" title="497"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">illegal_drugs_at_school  =</span> qn58) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-498" title="498"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-499" title="499"><span class="st">    </span><span class="co"># Have you ever had sexual intercourse?</span></a>
<a class="sourceLine" id="cb3-500" title="500"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-501" title="501">      <span class="dt">qn59 =</span> <span class="kw">recode</span>(qn59,</a>
<a class="sourceLine" id="cb3-502" title="502">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-503" title="503">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;No&quot;</span>),</a>
<a class="sourceLine" id="cb3-504" title="504">      <span class="dt">qn59 =</span> <span class="kw">as.factor</span>(qn59)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-505" title="505"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">ever_sexual_intercourse  =</span> qn59) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-506" title="506"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-507" title="507"><span class="st">    </span><span class="co"># How old were you when you had sexual intercourse for the first time?</span></a>
<a class="sourceLine" id="cb3-508" title="508"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-509" title="509">      <span class="dt">qn60 =</span> <span class="kw">recode</span>(qn60,</a>
<a class="sourceLine" id="cb3-510" title="510">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;12 years or younger&quot;</span>,</a>
<a class="sourceLine" id="cb3-511" title="511">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;never sexual intercourse/ 13 years or older&quot;</span>),</a>
<a class="sourceLine" id="cb3-512" title="512">      <span class="dt">qn60 =</span> <span class="kw">as.factor</span>(qn60)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-513" title="513"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">sex_before_13 =</span> qn60) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-514" title="514"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-515" title="515"><span class="st">    </span><span class="co"># During your life, with how many people have you had sexual intercourse?</span></a>
<a class="sourceLine" id="cb3-516" title="516"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-517" title="517">      <span class="dt">qn61 =</span> <span class="kw">recode</span>(qn61, </a>
<a class="sourceLine" id="cb3-518" title="518">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;4 people or more&quot;</span>,</a>
<a class="sourceLine" id="cb3-519" title="519">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;3 people or less&quot;</span>),</a>
<a class="sourceLine" id="cb3-520" title="520">      <span class="dt">qn61 =</span> <span class="kw">as.factor</span>(qn61)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-521" title="521"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">multiple_sex_partner =</span> qn61) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-522" title="522"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-523" title="523"><span class="st">    </span><span class="co"># During the past 3 months, with how many people did you have sexual intercourse?</span></a>
<a class="sourceLine" id="cb3-524" title="524"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-525" title="525">      <span class="dt">qn62 =</span> <span class="kw">recode</span>(qn62,</a>
<a class="sourceLine" id="cb3-526" title="526">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;1 people or more&quot;</span>,</a>
<a class="sourceLine" id="cb3-527" title="527">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;never sex/no sex during past 3 month&quot;</span>),</a>
<a class="sourceLine" id="cb3-528" title="528">      <span class="dt">qn62 =</span> <span class="kw">as.factor</span>(qn62)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-529" title="529"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">current_sexual_activity =</span> qn62) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-530" title="530"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-531" title="531"><span class="st">    </span><span class="co"># Did you drink alcohol or use drugs before you had sexual intercourse the last time?</span></a>
<a class="sourceLine" id="cb3-532" title="532"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-533" title="533">      <span class="dt">qn63 =</span> <span class="kw">recode</span>(qn63,</a>
<a class="sourceLine" id="cb3-534" title="534">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-535" title="535">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;no/not had sex yet&quot;</span>),</a>
<a class="sourceLine" id="cb3-536" title="536">      <span class="dt">qn63 =</span> <span class="kw">as.factor</span>(qn63)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-537" title="537"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">alcohol_drugs_sex =</span> qn63) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-538" title="538"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-539" title="539"><span class="st">    </span><span class="co"># The last time you had sexual intercourse, did you or your partner use a condom?</span></a>
<a class="sourceLine" id="cb3-540" title="540"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-541" title="541">      <span class="dt">qn64 =</span> <span class="kw">recode</span>(qn64,</a>
<a class="sourceLine" id="cb3-542" title="542">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;yes&quot;</span>,</a>
<a class="sourceLine" id="cb3-543" title="543">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;no/ not had sex yet&quot;</span>),</a>
<a class="sourceLine" id="cb3-544" title="544">      <span class="dt">qn64 =</span> <span class="kw">as.factor</span>(qn64)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-545" title="545"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">condom_use =</span> qn64) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-546" title="546"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-547" title="547"><span class="st">    </span><span class="co"># The last time you had sexual intercourse, what one method did you or your partner use to prevent pregnancy? (Select only one response.)</span></a>
<a class="sourceLine" id="cb3-548" title="548"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb3-549" title="549">      <span class="dt">qn65 =</span> <span class="kw">recode</span>(qn65,</a>
<a class="sourceLine" id="cb3-550" title="550">                    <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Birth control&quot;</span>,</a>
<a class="sourceLine" id="cb3-551" title="551">                    <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;never sexual intercourse/nothing/other method&quot;</span>),</a>
<a class="sourceLine" id="cb3-552" title="552">      <span class="dt">qn65 =</span> <span class="kw">as_factor</span>(qn65)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-553" title="553"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">birth_control_use =</span> qn65) </a>
<a class="sourceLine" id="cb3-554" title="554"><span class="co">#####################################################################################</span></a>
<a class="sourceLine" id="cb3-555" title="555"></a>
<a class="sourceLine" id="cb3-556" title="556">  df =<span class="st"> </span><span class="kw">rowid_to_column</span>(df, <span class="st">&quot;id&quot;</span>)</a>
<a class="sourceLine" id="cb3-557" title="557">}</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Combining Boroughs to one dataset</span></a>
<a class="sourceLine" id="cb4-2" title="2">df_total =<span class="st"> </span><span class="kw">bind_rows</span>(df_Bronx, df_Queens, df_Manhattan, df_StatenIsland, df_Brooklyn)</a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># How many NA? -&gt; helps us determine which variables to exclude</span></a>
<a class="sourceLine" id="cb4-5" title="5">prop_NA_all =<span class="st"> </span><span class="kw">prop_NA_original_data</span>(df_total)</a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co"># Actual Data Cleaning</span></a>
<a class="sourceLine" id="cb4-8" title="8">df_total =<span class="st"> </span><span class="kw">data_cleaning</span>(df_total)</a>
<a class="sourceLine" id="cb4-9" title="9"></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co"># How many NA in cleaned data?</span></a>
<a class="sourceLine" id="cb4-11" title="11">prop_NA_clean =<span class="st"> </span><span class="kw">prop_NA_original_data</span>(df_total)</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">write_xlsx</span>(<span class="dt">x =</span> df_total, <span class="dt">path =</span> <span class="st">&quot;./data/nyc_data.xlsx&quot;</span>, <span class="dt">col_names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">save</span>(df_total, <span class="dt">file =</span> <span class="st">&quot;./data/nyc_data.RData&quot;</span>)</a></code></pre></div>
<p>The following sections get the percentage of NA and the distribution of all response among all years and all question into the data cleaning rmd, after the undesired column is removed, can get new result by simply rerun the following codes.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">  <span class="co">#### fill in missing values with &quot;unknown&quot; </span></a>
<a class="sourceLine" id="cb6-2" title="2">fill_NA =<span class="st"> </span><span class="cf">function</span>(vector){</a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="kw">as.factor</span>(<span class="kw">coalesce</span>(<span class="kw">as.character</span>(vector),<span class="st">&quot;unknown&quot;</span>))</a>
<a class="sourceLine" id="cb6-4" title="4">  }</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">##This function take the df_total output and shown the amount of different response per column per year per borough</span></a>
<a class="sourceLine" id="cb6-6" title="6">distrib =<span class="st"> </span><span class="cf">function</span>(<span class="dt">df=</span>df_total){distribution=<span class="kw">map_df</span>(df,fill_NA)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw">as.numeric</span>(<span class="kw">as.character</span>(id)),<span class="dt">year =</span> <span class="kw">as.numeric</span>(<span class="kw">as.character</span>(year)))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="st">&quot;id&quot;</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">names_to =</span> <span class="st">&quot;question&quot;</span>,<span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>,<span class="dt">cols =</span> <span class="dv">3</span><span class="op">:</span><span class="kw">ncol</span>(.))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="st">  </span><span class="kw">count</span>(borough,year,question,response)<span class="op">%&gt;%</span><span class="kw">group_by</span>(borough,year,question,response)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">sum</span>(n))<span class="op">%&gt;%</span><span class="kw">left_join</span>(<span class="dt">x =</span> . , <span class="dt">y =</span> df<span class="op">%&gt;%</span><span class="kw">group_by</span>(borough,year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="kw">n</span>()))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">respons_count =</span> <span class="st">`</span><span class="dt">sum(n)</span><span class="st">`</span>, <span class="dt">total_count =</span><span class="st">`</span><span class="dt">n()</span><span class="st">`</span>, <span class="dt">perc =</span> <span class="st">`</span><span class="dt">sum(n)</span><span class="st">`</span><span class="op">/</span><span class="st">`</span><span class="dt">n()</span><span class="st">`</span>)<span class="op">%&gt;%</span><span class="kw">select</span>(<span class="op">-</span><span class="st">&quot;sum(n)&quot;</span>,<span class="op">-</span><span class="st">&quot;n()&quot;</span>)}</a>
<a class="sourceLine" id="cb6-12" title="12"></a>
<a class="sourceLine" id="cb6-13" title="13">distribution =<span class="st"> </span><span class="kw">distrib</span>(<span class="dt">df=</span>df_total)</a></code></pre></div>
<pre><code>## Joining, by = c(&quot;borough&quot;, &quot;year&quot;)
</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">distribution</a></code></pre></div>
<pre><code>## # A tibble: 6,722 x 7
## # Groups:   borough, year, question [2,400]
##    borough  year question    response     respons_count total_count    perc
##    &lt;fct&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;fct&gt;                &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;
##  1 Bronx    2003 age         13 years old             2        1347 1.48e-3
##  2 Bronx    2003 age         14 years old           172        1347 1.28e-1
##  3 Bronx    2003 age         15 years old           326        1347 2.42e-1
##  4 Bronx    2003 age         16 years old           375        1347 2.78e-1
##  5 Bronx    2003 age         17 years old           313        1347 2.32e-1
##  6 Bronx    2003 age         18 years ol~           158        1347 1.17e-1
##  7 Bronx    2003 age         unknown                  1        1347 7.42e-4
##  8 Bronx    2003 alcohol_dr~ unknown                834        1347 6.19e-1
##  9 Bronx    2003 alcohol_dr~ no/not had ~           444        1347 3.30e-1
## 10 Bronx    2003 alcohol_dr~ yes                     69        1347 5.12e-2
## # ... with 6,712 more rows
</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co">##This table shown the percentage of missing value per column per year</span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">naperc_df=<span class="kw">map_df</span>(df_total,fill_NA)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw">as.numeric</span>(<span class="kw">as.character</span>(id)),<span class="dt">year =</span> <span class="kw">as.numeric</span>(<span class="kw">as.character</span>(year)))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="st">&quot;id&quot;</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">names_to =</span> <span class="st">&quot;question&quot;</span>,<span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>,<span class="dt">cols =</span> <span class="dv">3</span><span class="op">:</span><span class="kw">ncol</span>(.))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="st">  </span><span class="kw">count</span>(borough,year,question,response)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="st">  </span><span class="kw">filter</span>(response <span class="op">==</span><span class="st"> &quot;unknown&quot;</span>)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="st">  </span><span class="kw">group_by</span>(year,question)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">sum</span>(n))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="st">  </span><span class="kw">left_join</span>(<span class="dt">x =</span> . , <span class="dt">y =</span> df_total<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="kw">n</span>()))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">naperc =</span> <span class="st">`</span><span class="dt">sum(n)</span><span class="st">`</span><span class="op">/</span><span class="st">`</span><span class="dt">n()</span><span class="st">`</span>,<span class="dt">actrsp =</span><span class="op">-</span><span class="st">`</span><span class="dt">sum(n)</span><span class="st">`</span><span class="op">+</span><span class="st">`</span><span class="dt">n()</span><span class="st">`</span> )</a></code></pre></div>
<pre><code>## Joining, by = &quot;year&quot;
</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">   regression_variable&lt;-<span class="kw">c</span>(</a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="co"># binary respone</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="st">&quot;current_vaping&quot;</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="co"># possible predictor</span></a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="st">&quot;texting_and_driving&quot;</span>,</a>
<a class="sourceLine" id="cb12-6" title="6">    <span class="st">&quot;carring_weapon&quot;</span>,</a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="st">&quot;sad_hopeless&quot;</span>,</a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="st">&quot;attempted_suicide&quot;</span>,</a>
<a class="sourceLine" id="cb12-9" title="9">    <span class="st">&quot;injurious_suicide_attempt&quot;</span>,</a>
<a class="sourceLine" id="cb12-10" title="10">    <span class="st">&quot;safety_concerns_at_school&quot;</span>,</a>
<a class="sourceLine" id="cb12-11" title="11">    <span class="st">&quot;threatened_at_school&quot;</span>,</a>
<a class="sourceLine" id="cb12-12" title="12">    <span class="st">&quot;physical_fighting&quot;</span>,</a>
<a class="sourceLine" id="cb12-13" title="13">    <span class="st">&quot;bullying_at_school&quot;</span>,</a>
<a class="sourceLine" id="cb12-14" title="14">    <span class="st">&quot;bullying_electronically&quot;</span>,</a>
<a class="sourceLine" id="cb12-15" title="15">    <span class="st">&quot;sex&quot;</span>,</a>
<a class="sourceLine" id="cb12-16" title="16">    <span class="st">&quot;age&quot;</span>,</a>
<a class="sourceLine" id="cb12-17" title="17">    <span class="st">&quot;race7&quot;</span>,</a>
<a class="sourceLine" id="cb12-18" title="18">    <span class="st">&quot;seatbelt_use&quot;</span>)</a>
<a class="sourceLine" id="cb12-19" title="19">   </a>
<a class="sourceLine" id="cb12-20" title="20">   naperc_df<span class="op">%&gt;%</span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2015</span>,<span class="dv">2017</span>))</a></code></pre></div>
<pre><code>## # A tibble: 120 x 6
## # Groups:   year [2]
##     year question                `sum(n)` `n()`  naperc actrsp
##    &lt;dbl&gt; &lt;chr&gt;                      &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;int&gt;
##  1  2015 age                           36  8522 0.00422   8486
##  2  2015 alcohol_drugs_sex           7239  8522 0.849     1283
##  3  2015 attempted_suicide           1445  8522 0.170     7077
##  4  2015 birth_control_use           7309  8522 0.858     1213
##  5  2015 bullying_at_school           179  8522 0.0210    8343
##  6  2015 bullying_electronically      210  8522 0.0246    8312
##  7  2015 carring_weapon               377  8522 0.0442    8145
##  8  2015 carring_weapon_school        210  8522 0.0246    8312
##  9  2015 condom_use                  7338  8522 0.861     1184
## 10  2015 considered_suicide           283  8522 0.0332    8239
## # ... with 110 more rows
</code></pre>

</body>
</html>
